{"version":3,"sources":["js/appAdmin.js","js/controllers/admin.js","js/controllers/auth.js","js/models/blog.js","js/controllers/blogs.js","js/directives/dragDrop.js","js/controllers/images.js","js/models/user.js","js/models/work.js","js/controllers/works.js"],"names":["Router","$stateProvider","$urlRouterProvider","state","url","views","admin","templateUrl","controller","controllerAs","otherwise","AdminHomeController","adminHome","this","title","LoginController","$auth","$state","submit","login","isLoggedIn","loginUrl","credentials","then","currentUser","getPayload","go","authenticate","service","Blog","$resource","id","update","method","BlogsIndexController","blogsIndex","query","data","blogs","BlogCreateController","addArticle","console","log","blogCreate","blog","save","_id","authUser","author","BlogShowController","blogShow","get","params","dragdrop","reader","FileReader","restrict","replace","link","$scope","element","base64String","onload","result","$apply","on","e","preventDefault","files","target","dataTransfer","readAsDataURL","ImageUploaderController","User","Work","WorksIndexController","worksIndex","works","WorkCreateController","workCreate","work","WorkShowController","workShow","angular","module","config","$inject","factory","directive"],"mappings":"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","file":"appAdmin.js","sourcesContent":["angular.module('admin', ['ngResource', 'ui.router', 'satellizer'])\n  .config(Router);\n\nRouter.$inject = ['$stateProvider', '$urlRouterProvider'];\nfunction Router($stateProvider, $urlRouterProvider) {\n  $stateProvider\n    .state('home', {\n      url: '/',\n      views: {\n        'admin': {\n          templateUrl: '/admin/templates/login.html',\n          controller: 'LoginController',\n          controllerAs: 'login'\n        }\n      }\n    })\n    .state('adminHome', {\n      url: '/home',\n      views: {\n        'admin': {\n          templateUrl: '/admin/templates/adminHome.html',\n          controller: 'AdminHomeController',\n          controllerAs: 'adminHome'\n        }\n      }\n    })\n    .state('imageUpload', {\n      url: '/imageUploader',\n      views: {\n        'admin': {\n          templateUrl: '/admin/templates/imageUploader.html',\n          controller: 'ImageUploaderController',\n          controllerAs: 'imageUploader'\n        }\n      }\n    })\n\n    // Blogs\n    .state('blogsIndex', {\n      url: '/blogs',\n      views: {\n        'admin': {\n          templateUrl: '/admin/templates/blogsIndex.html',\n          controller: 'BlogsIndexController',\n          controllerAs: 'blogsIndex'\n        }\n      }\n    })\n    .state('blogCreate', {\n      url: '/blogs/new',\n      views: {\n        'admin': {\n          templateUrl: '/admin/templates/blogCreate.html',\n          controller: 'BlogCreateController',\n          controllerAs: 'blogCreate'\n        }\n      }\n    })\n    .state('blogShow', {\n      url: '/blogs/:id',\n      views: {\n        'admin': {\n          templateUrl: '/admin/templates/blogShow.html',\n          controller: 'BlogShowController',\n          controllerAs: 'blogShow'\n        }\n      }\n    })\n\n    // Works\n    .state('worksIndex', {\n      url: '/works',\n      views: {\n        'admin': {\n          templateUrl: '/admin/templates/worksIndex.html',\n          controller: 'WorksIndexController',\n          controllerAs: 'worksIndex'\n        }\n      }\n    })\n    .state('workCreate', {\n      url: '/works/new',\n      views: {\n        'admin': {\n          templateUrl: '/admin/templates/workCreate.html',\n          controller: 'WorkCreateController',\n          controllerAs: 'workCreate'\n        }\n      }\n    })\n    .state('workShow', {\n      url: '/works/:id',\n      views: {\n        'admin': {\n          templateUrl: '/admin/templates/workShow.html',\n          controller: 'WorkShowController',\n          controllerAs: 'workShow'\n        }\n      }\n    });\n  $urlRouterProvider.otherwise('/');\n}\n","angular.module('admin')\n  .controller('AdminHomeController', AdminHomeController);\n\nfunction AdminHomeController() {\n  const adminHome = this;\n  adminHome.title = 'This is the admin panel';\n\n}\n","angular.module('admin')\n.controller('LoginController', LoginController);\n\nLoginController.$inject = ['$auth', '$state'];\nfunction LoginController($auth, $state) {\n  const login = this;\n\n  login.credentials = {};\n\n  function submit() {\n    login.isLoggedIn = true;\n    $auth.loginUrl = '/api/auth/login';\n\n    $auth.login(login.credentials)\n      .then(() => {\n        login.currentUser = $auth.getPayload();\n        $state.go('adminHome');\n      });\n  }\n\n  function authenticate(service) {\n    $auth.authenticate(service)\n    .then(() => {\n      $state.go('adminHome');\n    });\n  }\n\n  login.submit = submit;\n  login.authenticate = authenticate;\n}\n","angular.module('admin')\n  .factory('Blog', Blog);\n\nBlog.$inject = ['$resource'];\nfunction Blog($resource) {\n  return new $resource('/api/blogs/:id', { id: '@_id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('admin')\n  .controller('BlogsIndexController', BlogsIndexController)\n  .controller('BlogCreateController', BlogCreateController)\n  .controller('BlogShowController', BlogShowController);\n\nBlogsIndexController.$inject = ['$resource', 'Blog'];\nfunction BlogsIndexController($resource, Blog) {\n  const blogsIndex = this;\n\n  Blog.query(data => {\n    blogsIndex.blogs = data;\n  });\n}\n\nBlogCreateController.$inject = ['$resource', '$state', '$auth', 'Blog'];\nfunction BlogCreateController($resource, $state, $auth, Blog) {\n  const blogCreate = this;\n\n  blogCreate.authUser = $auth.getPayload();\n  if(blogCreate.authUser) {\n    blogCreate.authUser = blogCreate.authUser._id;\n  }\n\n  blogCreate.blog = {\n    author: blogCreate.authUser\n  };\n\n  function addArticle() {\n    console.log(blogCreate.blog);\n    Blog.save(blogCreate, (data) => {\n      $state.go('blogShow', {id: data._id});\n    });\n  }\n\n  blogCreate.addArticle = addArticle;\n}\n\nBlogShowController.$inject = ['$resource', 'Blog', '$state'];\nfunction BlogShowController($resource, Blog, $state) {\n  const blogShow = this;\n\n  Blog.get($state.params, data => {\n    blogShow.data = data;\n  });\n}\n","angular.module('admin')\n  .directive('dragdrop', dragdrop);\n\nfunction dragdrop() {\n  const reader = new FileReader();\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: 'templates/dragDrop.html',\n    link($scope, element) {\n\n      $scope.base64String = null;\n\n      reader.onload = () => {\n        $scope.base64String = reader.result;\n        $scope.$apply();\n      };\n\n      element\n        .on('dragover', (e) => {\n          e.preventDefault();\n          console.log('AGR');\n        })\n        .on('drop', (e) => {\n          e.preventDefault();\n          console.log('dropped');\n\n          const files = (e.target.files || e.dataTransfer.files)[0];\n\n          reader.readAsDataURL(files);\n        });\n    }\n  };\n}\n","angular.module('admin')\n  .controller('ImageUploaderController', ImageUploaderController);\n\nImageUploaderController.$inject = ['$resource'];\nfunction ImageUploaderController($resource) {\n}\n","angular.module('admin')\n  .factory('User', User);\n\nUser.$inject = ['$resource'];\nfunction User($resource) {\n  return new $resource('/api/users/:id', { id: '@_id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('admin')\n  .factory('Work', Work);\n\nWork.$inject = ['$resource'];\nfunction Work($resource) {\n  return new $resource('/api/works/:id', { id: '@_id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('admin')\n  .controller('WorksIndexController', WorksIndexController)\n  .controller('WorkCreateController', WorkCreateController)\n  .controller('WorkShowController', WorkShowController);\n\nWorksIndexController.$inject = ['$resource', 'Work'];\nfunction WorksIndexController($resource, Work) {\n  const worksIndex = this;\n\n  Work.query(data => {\n    worksIndex.works = data;\n  });\n}\n\nWorkCreateController.$inject = ['$resource', '$state', '$auth', 'Work'];\nfunction WorkCreateController($resource, $state, $auth, Work) {\n  const workCreate = this;\n\n  workCreate.authUser = $auth.getPayload();\n  if(workCreate.authUser) {\n    workCreate.authUser = workCreate.authUser._id;\n  }\n\n  workCreate.work = {\n    author: workCreate.authUser\n  };\n\n  function addArticle() {\n    console.log(workCreate.work);\n    Work.save(workCreate, (data) => {\n      $state.go('workShow', {id: data._id});\n    });\n  }\n\n  workCreate.addArticle = addArticle;\n}\n\nWorkShowController.$inject = ['$resource', 'Work', '$state'];\nfunction WorkShowController($resource, Work, $state) {\n  const workShow = this;\n\n  Work.get($state.params, data => {\n    workShow.data = data;\n  });\n}\n"]}